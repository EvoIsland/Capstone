<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración Completo (CSS Puro)</title>
    
    <!-- Leaflet CSS (para el mapa) - Esto NO es Tailwind -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" xintegrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVL9oEYYnRhpNcOPHfBfORGdGrj8e/AStsz/nF+X/cQv1S.tLq/eQ==" crossorigin=""/>
    
    <!-- Leaflet JS (para el mapa) -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" xintegrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1/L+7MWXcSHc3ZoCSxN4/RcrrTfdO.js" crossorigin=""></script>

    <!-- Fuente Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- INICIO DE CSS PERSONALIZADO (Reemplazo de Tailwind) -->
    <style>
        /* --- Reset Básico y Globales --- */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #1f2937; /* text-gray-800 */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        * {
            box-sizing: border-box;
        }

        /* --- Clases de Utilidad --- */
        .is-hidden {
            display: none !important;
        }

        /* --- Scrollbar --- */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* --- Layout Principal --- */
        .dashboard-container {
            display: flex;
            height: 100vh;
            background-color: #f3f4f6;
        }

        /* --- Barra Lateral (Sidebar) --- */
        .sidebar {
            width: 256px; /* w-64 */
            background-color: #111827; /* bg-gray-900 */
            color: #d1d5db; /* text-gray-200 */
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            z-index: 30;
            flex-shrink: 0;
        }

        .sidebar-logo {
            height: 80px; /* h-20 */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 1rem; /* px-4 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
        }
        .sidebar-logo-icon {
            height: 2.5rem; /* h-10 */
            width: 2.5rem; /* w-10 */
            color: #6366f1; /* text-indigo-500 */
            margin-right: 0.5rem; /* space-x-2 */
        }
        .sidebar-logo-text {
            font-weight: 700; /* font-bold */
            font-size: 1.5rem; /* text-2xl */
            color: white;
        }

        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0; /* py-4 */
        }
        .sidebar-nav ul {
            list-style: none;
            margin: 0;
            padding: 0 1rem; /* px-4 */
        }
        .sidebar-nav li {
            margin-bottom: 0.5rem; /* space-y-2 */
        }
        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem; /* px-4 py-3 */
            border-radius: 0.5rem; /* rounded-lg */
            transition: background-color 0.2s, color 0.2s;
            text-decoration: none;
            color: #d1d5db; /* text-gray-200 */
        }
        .nav-link svg {
            width: 1.5rem; /* h-6 w-6 */
            height: 1.5rem;
            margin-right: 0.75rem; /* space-x-3 */
        }
        .nav-link:hover {
            background-color: #374151; /* hover:bg-gray-700 */
            color: white;
        }
        .nav-link.is-active {
            background-color: #4f46e5; /* active:bg-indigo-600 */
            color: white;
        }

        .sidebar-profile {
            padding: 1rem; /* p-4 */
            border-top: 1px solid #374151; /* border-t border-gray-700 */
            display: flex;
            align-items: center;
            gap: 0.75rem; /* space-x-3 */
        }
        .sidebar-profile img {
            height: 2.5rem; /* h-10 */
            width: 2.5rem; /* w-10 */
            border-radius: 9999px; /* rounded-full */
        }
        .sidebar-profile-info p {
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* font-medium */
            color: white;
            margin: 0;
        }
        .sidebar-profile-info a {
            font-size: 0.75rem; /* text-xs */
            color: #9ca3af; /* text-gray-400 */
            text-decoration: none;
        }
        .sidebar-profile-info a:hover {
            color: #818cf8; /* hover:text-indigo-400 */
        }

        /* --- Contenido Principal --- */
        .main-content {
            flex: 1;
            margin-left: 256px; /* ml-64 */
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden; /* Evita doble scroll */
        }

        .main-header {
            background-color: white;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); /* shadow-sm */
            border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
            position: sticky;
            top: 0;
            z-index: 20;
            height: 64px; /* h-16 */
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem; /* lg:px-8 */
            flex-shrink: 0;
        }
        #page-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            color: #111827; /* text-gray-900 */
            margin: 0;
        }
        .header-actions button {
            background: none;
            border: none;
            padding: 0.25rem; /* p-1 */
            border-radius: 9999px; /* rounded-full */
            color: #9ca3af; /* text-gray-400 */
            cursor: pointer;
        }
        .header-actions button:hover {
            color: #4b5563; /* hover:text-gray-600 */
        }
        .header-actions button svg {
            width: 1.5rem; /* h-6 w-6 */
            height: 1.5rem;
        }

        /* --- Área de Contenido de Página --- */
        .page-content-area {
            padding: 2rem; /* py-8 px-4 sm:px-6 lg:px-8 */
            flex: 1;
            overflow-y: auto; /* Scroll para páginas largas como Dashboard */
        }
        
        .content-page.is-hidden {
            display: none;
        }
        
        /* --- Componentes Generales --- */
        .card {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            overflow: hidden;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 1.5rem; /* gap-6 */
            margin-bottom: 2rem; /* mb-8 */
        }
        @media (min-width: 640px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (min-width: 1024px) {
            .stats-grid { grid-template-columns: repeat(4, 1fr); }
        }

        .stat-card {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            padding: 1.5rem; /* p-6 */
            display: flex;
            align-items: center;
            gap: 1rem; /* space-x-4 */
            transition: box-shadow 0.3s ease;
        }
        .stat-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* hover:shadow-xl */
        }
        .stat-icon {
            padding: 0.75rem; /* p-3 */
            border-radius: 9999px; /* rounded-full */
            flex-shrink: 0;
        }
        .stat-icon svg { width: 1.5rem; height: 1.5rem; }
        .stat-icon.indigo { background-color: #e0e7ff; color: #4f46e5; }
        .stat-icon.red { background-color: #fee2e2; color: #dc2626; }
        .stat-icon.blue { background-color: #dbeafe; color: #2563eb; }
        .stat-icon.green { background-color: #d1fae5; color: #059669; }
        
        .stat-info p { margin: 0; }
        .stat-info .title {
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* font-medium */
            color: #6b7280; /* text-gray-500 */
        }
        .stat-info .value {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 700; /* font-bold */
            color: #111827; /* text-gray-900 */
        }

        .tabs-nav {
            margin-bottom: 1.5rem; /* mb-6 */
            border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
        }
        .tabs-nav nav {
            display: flex;
            gap: 2rem; /* space-x-8 */
            margin-bottom: -1px; /* -mb-px */
        }
        .tab-button {
            white-space: nowrap;
            padding: 1rem 0.25rem; /* py-4 px-1 */
            border-bottom: 2px solid transparent;
            font-weight: 500; /* font-medium */
            font-size: 0.875rem; /* text-sm */
            color: #6b7280; /* text-gray-500 */
            background: none;
            border-top: none;
            border-left: none;
            border-right: none;
            cursor: pointer;
        }
        .tab-button:hover {
            color: #374151; /* hover:text-gray-700 */
            border-color: #d1d5db; /* hover:border-gray-300 */
        }
        .tab-button.is-active {
            border-color: #4f46e5; /* border-indigo-500 */
            color: #4338ca; /* text-indigo-600 */
        }

        .table-container { overflow-x: auto; }
        table {
            min-width: 100%;
            border-collapse: collapse;
            border-spacing: 0;
        }
        table thead { background-color: #f9fafb; /* bg-gray-50 */ }
        table th, table td {
            border-bottom: 1px solid #e5e7eb; /* divide-y */
        }
        table th {
            padding: 0.75rem 1.5rem; /* px-6 py-3 */
            text-align: left;
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* font-medium */
            color: #6b7280; /* text-gray-500 */
            text-transform: uppercase;
            letter-spacing: 0.05em; /* tracking-wider */
        }
        table td {
            padding: 1rem 1.5rem; /* px-6 py-4 */
            white-space: nowrap;
            font-size: 0.875rem; /* text-sm */
            color: #374151;
        }
        .table-avatar { display: flex; align-items: center; }
        .table-avatar img { width: 2rem; height: 2rem; border-radius: 9999px; }
        .table-avatar-info { margin-left: 0.75rem; }
        .table-avatar-info .name { font-weight: 500; color: #111827; }
        .table-avatar-info .email { color: #6b7280; }
        
        .status-badge {
            padding: 0.25rem 0.75rem; /* px-3 py-1 */
            display: inline-flex;
            font-size: 0.75rem; /* text-xs */
            font-weight: 600; /* font-semibold */
            border-radius: 9999px; /* rounded-full */
        }
        .status-green { background-color: #d1fae5; color: #065f46; } /* bg-green-100 text-green-800 */
        .status-red { background-color: #fee2e2; color: #991b1b; } /* bg-red-100 text-red-800 */

        .table-actions {
            text-align: right;
            display: flex;
            gap: 0.75rem; /* space-x-3 */
            justify-content: flex-end;
        }
        .table-actions button {
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }
        .link-indigo { color: #4f46e5; }
        .link-indigo:hover { color: #3730a3; }
        .link-red { color: #dc2626; }
        .link-red:hover { color: #991b1b; }
        .link-green { color: #059669; }
        .link-green:hover { color: #047857; }

        .card-header, .card-footer {
            padding: 1.25rem; /* p-5 */
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .card-footer { border-bottom: 0; border-top: 1px solid #e5e7eb; }
        
        .form-input, .form-select {
            display: block;
            width: 100%;
            border: 1px solid #d1d5db; /* border-gray-300 */
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            font-size: 0.875rem; /* text-sm */
            padding: 0.6rem 0.75rem; /* Ajustado para py-2 px-3 */
            font-family: 'Inter', sans-serif;
        }
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 1px #4f46e5;
        }
        .form-input[readonly] {
            background-color: #f3f4f6; /* bg-gray-100 */
        }

        .button {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem; /* rounded-lg */
            font-weight: 700; /* font-bold */
            border: none;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem; /* space-x-2 */
            font-size: 0.875rem; /* text-sm */
        }
        .button-indigo { background-color: #4f46e5; color: white; }
        .button-indigo:hover { background-color: #4338ca; }
        .button-red { background-color: #dc2626; color: white; }
        .button-red:hover { background-color: #b91c1c; }
        .button-gray { background-color: #e5e7eb; color: #1f2937; }
        .button-gray:hover { background-color: #d1d5db; }
        .button svg { width: 1.25rem; height: 1.25rem; }

        /* --- Página de Publicaciones (3 Columnas) --- */
        #page-publicaciones {
            /* Remover padding de .page-content-area para esta página */
            margin: -2rem; 
            padding: 2rem;
            height: calc(100vh - 64px); /* 100vh - header height */
        }
        .publications-layout {
            display: grid;
            grid-template-columns: 1fr; /* Stacked por defecto */
            gap: 1.5rem; /* gap-6 */
            height: 100%;
        }
        @media (min-width: 1024px) {
            .publications-layout {
                grid-template-columns: 3fr 4fr 3fr; /* lg:grid-cols-10 */
            }
        }
        
        .column-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden; /* Importante */
        }
        .column-header {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            flex-shrink: 0;
        }
        .column-header h3 {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            margin: 0;
        }
        .column-header p {
            font-size: 0.875rem; /* text-sm */
            color: #6b7280; /* text-gray-500 */
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .column-filters {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }
        .column-filters .form-select {
            width: 50%;
        }

        .column-content-list {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.5rem; /* space-y-2 */
        }

        .installation-item {
            display: block;
            padding: 0.75rem;
            border-radius: 0.5rem;
            text-decoration: none;
            color: inherit;
            border-left: 4px solid transparent;
            cursor: pointer;
        }
        .installation-item:hover {
            background-color: #f3f4f6; /* hover:bg-gray-100 */
        }
        .installation-item.is-active {
            background-color: #e0e7ff; /* bg-indigo-100 */
            border-left-color: #4f46e5; /* border-indigo-500 */
        }
        .installation-item h4 { font-weight: 500; margin: 0 0 0.25rem 0; }
        .installation-item p { font-size: 0.875rem; color: #6b7280; margin: 0; }

        .publications-col-2 > h3 {
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* font-semibold */
            margin-bottom: 1rem;
            padding: 0 0.5rem; /* Padding para alinear con feed */
        }
        .publications-col-2 > h3 span { color: #4f46e5; }
        
        .publications-feed {
            height: calc(100% - 3.5rem); /* 100% - altura del h3 */
            overflow-y: auto;
            padding-right: 0.5rem; /* pr-2 */
            display: flex;
            flex-direction: column;
            gap: 1.25rem; /* space-y-5 */
            padding-bottom: 1rem;
        }
        .publication-item {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-lg */
            cursor: pointer;
            border: 2px solid transparent;
        }
        .publication-item:hover {
            border-color: #818cf8; /* hover:border-indigo-400 */
        }
        .publication-item.is-active {
            border-color: #4f46e5; /* border-indigo-500 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .publication-item-content { padding: 1.25rem; /* p-5 */ }
        .publication-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem; /* mb-3 */
        }
        .publication-item-author {
            display: flex;
            align-items: center;
            gap: 0.75rem; /* space-x-3 */
        }
        .publication-item-author img {
            width: 2.5rem; /* h-10 w-10 */
            height: 2.5rem;
            border-radius: 9999px;
        }
        .publication-item-author p { margin: 0; }
        .publication-item-author .name { font-weight: 500; font-size: 0.875rem; }
        .publication-item-author .date { font-size: 0.75rem; color: #6b7280; }
        
        .publication-item h4 { font-weight: 600; margin: 0 0 0.5rem 0; color: #1f2937; }
        .publication-item p {
            font-size: 0.875rem;
            color: #4b5563;
            margin: 0;
            /* line-clamp-3 */
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
        }
        
        .comment-item {
            background-color: #f9fafb; /* bg-gray-50 */
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #e5e7eb;
        }
        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.25rem; /* mb-1 */
        }
        .comment-author {
            display: flex;
            align-items: center;
            gap: 0.5rem; /* space-x-2 */
        }
        .comment-author img { width: 1.5rem; height: 1.5rem; border-radius: 9999px; }
        .comment-author span { font-weight: 500; font-size: 0.875rem; }
        .comment-action-btn {
            background: none; border: none; color: #9ca3af; cursor: pointer;
        }
        .comment-action-btn:hover { color: #4b5563; }
        .comment-action-btn svg { width: 1.25rem; height: 1.25rem; }
        .comment-item p {
            font-size: 0.875rem;
            color: #4b5563;
            margin: 0;
        }
        .comment-footer {
            padding: 1rem;
            border-top: 1px solid #e5e7eb;
            flex-shrink: 0;
        }

        /* --- Modales --- */
        .modal-container {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 40;
            padding: 1rem;
        }
        .modal-container.is-hidden {
            display: none;
        }

        .modal-content {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* shadow-2xl */
            width: 100%;
            max-width: 48rem; /* max-w-3xl */
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }
        .modal-content-lg { max-width: 72rem; } /* max-w-6xl */
        .modal-content-md { max-width: 42rem; } /* max-w-2xl */

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem; /* p-5 */
            border-bottom: 1px solid #e5e7eb;
            flex-shrink: 0;
        }
        .modal-header h3 { font-size: 1.25rem; font-weight: 600; margin: 0; }
        .modal-header .close-modal {
            background: none; border: none; cursor: pointer; color: #9ca3af;
        }
        .modal-header .close-modal:hover { color: #4b5563; }
        .modal-header .close-modal svg { width: 1.5rem; height: 1.5rem; }
        
        .modal-body {
            padding: 1.5rem; /* p-6 */
            overflow-y: auto;
            flex: 1;
        }
        .modal-body-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        @media (min-width: 768px) {
            .modal-body-grid { grid-template-columns: 1fr 1fr; }
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding: 1.25rem; /* p-5 */
            border-top: 1px solid #e5e7eb;
            gap: 0.75rem; /* space-x-3 */
            flex-shrink: 0;
        }

        #map {
            height: 300px;
            z-index: 10;
            border-radius: 0.5rem;
            border: 1px solid #d1d5db;
            margin-top: 0.25rem;
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        @media (min-width: 640px) {
            .form-grid { grid-template-columns: 1fr 1fr; }
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }
        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151; /* text-gray-700 */
        }
        
        /* Modal de Detalles de Publicación (columnas) */
        .post-details-grid {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr; /* Stacked */
            overflow: hidden;
        }
        @media (min-width: 1024px) {
            .post-details-grid { grid-template-columns: 2fr 1fr; } /* lg:grid-cols-3 */
        }
        .post-details-post {
            padding: 1.5rem; /* p-6 */
            overflow-y: auto;
            border-right: 1px solid #e5e7eb;
        }
        .post-details-post h4 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            margin: 0 0 0.5rem 0;
        }
        .post-details-author {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .post-details-author img { width: 2rem; height: 2rem; border-radius: 9999px; }
        .post-details-author .name { font-size: 0.875rem; font-weight: 500; }
        .post-details-author .date { font-size: 0.875rem; color: #6b7280; }
        
        .prose { line-height: 1.6; color: #374151; }
        .prose p { margin-bottom: 1rem; }

        .post-details-comments {
            padding: 1.5rem; /* p-6 */
            background-color: #f9fafb; /* bg-gray-50 */
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem; /* space-y-4 */
        }
        .post-details-comments h5 {
            font-weight: 600;
            margin: 0 0 1rem 0;
        }
        .post-details-comments .comment-item {
            background-color: white; /* bg-white */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
        }

    </style>
    <!-- FIN DE CSS PERSONALIZADO -->
</head>
<body>

    <div class="dashboard-container">
        <!-- Barra de Navegación Lateral (Sidebar) -->
        <aside class="sidebar">
            <!-- Logo -->
            <div class="sidebar-logo">
                <svg class="sidebar-logo-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25" />
                </svg>
                <span class="sidebar-logo-text">AdminForo</span>
            </div>
            
            <!-- Menú de Navegación -->
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" class="nav-link is-active" data-target="page-dashboard">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>
                            <span>Inicio</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="page-usuarios">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.003c0 1.113.285 2.16.786 3.07M15 19.128a2.25 2.25 0 01-2.25-2.25v-.003c0-1.113-.285-2.16-.786-3.07M9 13.5a3 3 0 11-6 0 3 3 0 016 0zm-3 8.25a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM21 13.5a3 3 0 11-6 0 3 3 0 016 0zm-3 8.25a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM3.5 7.5a3 3 0 11-6 0 3 3 0 016 0zm-3 8.25a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM21 7.5a3 3 0 11-6 0 3 3 0 016 0zm-3 8.25a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" /></svg>
                            <span>Usuarios</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="page-publicaciones">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
                            <span>Publicaciones</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="page-instalaciones">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" /></svg>
                            <span>Instalaciones</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <!-- Perfil de Admin (Abajo) -->
            <div class="sidebar-profile">
                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=A" alt="Avatar de usuario">
                <div class="sidebar-profile-info">
                    <p>Admin</p>
                    <a href="#">Cerrar Sesión</a>
                </div>
            </div>
        </aside>

        <!-- Contenido Principal -->
        <main class="main-content">
            <!-- Encabezado Superior -->
            <header class="main-header">
                <h1 id="page-title">
                    Inicio
                </h1>
                <div class="header-actions">
                    <button aria-label="Notificaciones">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Área de Contenido Dinámico -->
            <div class="page-content-area">
                
                <!-- PÁGINA: INICIO (DASHBOARD) -->
                <div id="page-dashboard" class="content-page">
                    <!-- Tarjetas de Estadísticas (KPIs) -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon indigo">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
                            </div>
                            <div class="stat-info">
                                <p class="title">Total Publicaciones</p>
                                <p class="value">1,240</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon red">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3v1.5M3 21v-6m0 0l2.77-.693a9 9 0 016.208.682l.108.054a9 9 0 006.086.71l3.114-.732a48.524 48.524 0 01-.005-10.499l-3.11.732a9 9 0 01-6.085-.711l-.108-.054a9 9 0 00-6.208-.682L3 4.5M3 15V4.5" /></svg>
                            </div>
                            <div class="stat-info">
                                <p class="title">Contenido Reportado</p>
                                <p class="value">28</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon blue">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </div>
                            <div class="stat-info">
                                <p class="title">Total Comentarios</p>
                                <p class="value">4,109</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon green">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-4.682 2.72a.75.75 0 01-.059 1.054a9.094 9.094 0 01-3.741.479 3 3 0 01-4.682-2.72M18 18.72A7.96 7.96 0 0012 21a7.96 7.96 0 00-6-2.28m12 0A5.96 5.96 0 0012 15a5.96 5.96 0 00-6 3.72m12 0a9.094 9.094 0 01-3.741-.479 3 3 0 01-4.682-2.72M6 18.72a9.094 9.094 0 01-3.741-.479 3 3 0 01-4.682-2.72m4.682 2.72c.059 1.054.09 2.128.09 3.228a7.96 7.96 0 00-6-2.28M6 18.72A5.96 5.96 0 0112 15a5.96 5.96 0 016 3.72m0 0a9.094 9.094 0 003.741-.479 3 3 0 004.682-2.72M12 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </div>
                            <div class="stat-info">
                                <p class="title">Total Usuarios</p>
                                <p class="value">345</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PÁGINA: GESTIÓN DE USUARIOS -->
                <div id="page-usuarios" class="content-page is-hidden">
                    <div class="tabs-nav">
                        <nav aria-label="Tabs">
                            <button class="tab-button user-tab is-active" data-tab="all-users">
                                Todos los Usuarios
                            </button>
                            <button class="tab-button user-tab" data-tab="reported-users">
                                Con Reportes
                            </button>
                            <button class="tab-button user-tab" data-tab="banned-users">
                                Baneados
                            </button>
                        </nav>
                    </div>

                    <div id="tab-all-users" class="user-tab-content card">
                        <div class="card-header">
                             <input class="form-input" style="width: 256px;" type="search" placeholder="Buscar por nombre o email...">
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Estado</th>
                                        <th>Miembro desde</th>
                                        <th style="text-align: right;">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="table-avatar">
                                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=AG" alt="Avatar">
                                                <div class="table-avatar-info">
                                                    <div class="name">Ana Gómez</div>
                                                    <div class="email">ana.gomez@example.com</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge status-green">Activo</span>
                                        </td>
                                        <td>10/10/2024</td>
                                        <td class="table-actions">
                                            <button class="open-modal link-indigo" data-modal-id="user-details-modal">Ver Detalles</button>
                                            <button class="link-red">Banear</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="table-avatar">
                                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=CP" alt="Avatar">
                                                <div class="table-avatar-info">
                                                    <div class="name">Carlos Pérez</div>
                                                    <div class="email">carlos.perez@example.com</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge status-red">Baneado</span>
                                        </td>
                                        <td>05/09/2024</td>
                                        <td class="table-actions">
                                            <button class="open-modal link-indigo" data-modal-id="user-details-modal">Ver Detalles</button>
                                            <button class="link-green">Quitar Ban</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="card-footer">
                            <!-- Paginación -->
                        </div>
                    </div>
                    <div id="tab-reported-users" class="user-tab-content is-hidden card" style="padding: 1.25rem;">Contenido de Usuarios Reportados...</div>
                    <div id="tab-banned-users" class="user-tab-content is-hidden card" style="padding: 1.25rem;">Contenido de Usuarios Baneados...</div>
                </div>

                <!-- PÁGINA: GESTIÓN DE PUBLICACIONES (REDISEÑADA) -->
                <div id="page-publicaciones" class="content-page is-hidden">
                    <div class="publications-layout"> 
                        
                        <!-- Col 1: Lista de Instalaciones -->
                        <div class="publications-col-1">
                            <div class="column-card">
                                <div class="column-header">
                                    <h3>Instalaciones</h3>
                                    <div class="column-filters">
                                        <select class="form-select" title="Filtrar por Región">
                                            <option>Todas las Regiones</option>
                                            <option>Metropolitana</option>
                                            <option>Valparaíso</option>
                                        </select>
                                        <select class="form-select" title="Filtrar por Comuna">
                                            <option>Todas las Comunas</option>
                                            <option>Las Condes</option>
                                            <option>Santiago</option>
                                            <option>Viña del Mar</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="installation-list" class="column-content-list">
                                    <a href="#" class="installation-item is-active" data-id="1" onclick="selectInstallation(event, this, 'Parque Araucano')">
                                        <h4>Parque Araucano</h4>
                                        <p>Las Condes</p>
                                    </a>
                                    <a href="#" class="installation-item" data-id="2" onclick="selectInstallation(event, this, 'Parque O\'Higgins')">
                                        <h4>Parque O'Higgins</h4>
                                        <p>Santiago</p>
                                    </a>
                                     <a href="#" class="installation-item" data-id="3" onclick="selectInstallation(event, this, 'Quinta Vergara')">
                                        <h4>Quinta Vergara</h4>
                                        <p>Viña del Mar</p>
                                    </a>
                                    <a href="#" class="installation-item" data-id="4" onclick="selectInstallation(event, this, 'Parque Bicentenario')">
                                        <h4>Parque Bicentenario</h4>
                                        <p>Vitacura</p>
                                    </a>
                                </div>
                            </div>
                        </div>
            
                        <!-- Col 2: Publicaciones (Feed) -->
                        <div class="publications-col-2">
                             <h3>Publicaciones en <span id="selected-installation-name">Parque Araucano</span></h3>
                            <div class="publications-feed" id="publications-feed">
                                <!-- Post 1 (Card Format) -->
                                <div class="publication-item is-active" data-id="p1" onclick="selectPublication(event, this, 'Estado de las canchas')">
                                    <div class="publication-item-content">
                                        <div class="publication-item-header">
                                            <div class="publication-item-author">
                                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=AG" alt="Avatar">
                                                <div>
                                                    <p class="name">Ana Gómez</p>
                                                    <p class="date">11/11/2025</p>
                                                </div>
                                            </div>
                                            <span class="status-badge status-green">Publicado</span>
                                        </div>
                                        <h4>Estado de las canchas</h4>
                                        <p>Hola a todos, Quería saber si alguien ha ido al Parque Araucano esta semana. ¿Cómo están las canchas de fútbol después de la lluvia del lunes? Agradecería cualquier información, ¡gracias!</p>
                                    </div>
                                </div>
                                <!-- Post 2 -->
                                <div class="publication-item" data-id="p2" onclick="selectPublication(event, this, 'SPAM: Vendo cosas')">
                                    <div class="publication-item-content">
                                         <div class="publication-item-header">
                                            <div class="publication-item-author">
                                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=SB" alt="Avatar">
                                                <div>
                                                    <p class="name">Spam Bot</p>
                                                    <p class="date">10/11/2025</p>
                                                </div>
                                            </div>
                                            <span class="status-badge status-red">Reportado</span>
                                        </div>
                                        <h4>SPAM: Vendo cosas</h4>
                                        <p>Las mejores ofertas solo por hoy, haz clic en este enlace... lorem ipsum dolor sit amet.</p>
                                    </div>
                                </div>
                                 <!-- Post 3 -->
                                <div class="publication-item" data-id="p3" onclick="selectPublication(event, this, 'Busco gente para jugar hoy')">
                                    <div class="publication-item-content">
                                         <div class="publication-item-header">
                                            <div class="publication-item-author">
                                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=AG" alt="Avatar">
                                                <div>
                                                    <p class="name">Ana Gómez</p>
                                                    <p class="date">10/11/2025</p>
                                                </div>
                                            </div>
                                            <span class="status-badge status-green">Publicado</span>
                                        </div>
                                        <h4>Busco gente para jugar hoy</h4>
                                        <p>Somos 3 y nos falta uno para jugar a las 7pm en el Araucano. ¿Alguien se suma?</p>
                                    </div>
                                </div>
                            </div>
                        </div>
            
                        <!-- Col 3: Comentarios -->
                        <div class="publications-col-3">
                             <div class="column-card">
                                <div class="column-header">
                                    <h3>Comentarios</h3>
                                    <p id="selected-post-name">de "Estado de las canchas"</p>
                                </div>
                                <div class="column-content-list" id="comments-section">
                                    <!-- Comentario 1 -->
                                    <div class="comment-item">
                                        <div class="comment-header">
                                            <div class="comment-author">
                                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=CP" alt="Avatar">
                                                <span>Carlos Pérez</span>
                                            </div>
                                            <button class="comment-action-btn" aria-label="Acciones de comentario">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z" /></svg>
                                            </button>
                                        </div>
                                        <p>Fui ayer y estaban un poco húmedas pero jugables. Hoy deberían estar perfectas.</p>
                                    </div>
                                    <!-- Comentario 2 -->
                                    <div class="comment-item">
                                         <div class="comment-header">
                                            <div class="comment-author">
                                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=LM" alt="Avatar">
                                                <span>Lucía Méndez</span>
                                            </div>
                                            <button class="comment-action-btn" aria-label="Acciones de comentario">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z" /></svg>
                                            </button>
                                        </div>
                                        <p>Confirmo, acabo de pasar por ahí y se ven bien.</p>
                                    </div>
                                </div>
                                <div class="comment-footer">
                                    <input type="text" placeholder="Escribir un comentario..." class="form-input">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PÁGINA: GESTIÓN DE INSTALACIONES -->
                <div id="page-instalaciones" class="content-page is-hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 style="font-size: 1.125rem; font-weight: 600;">Lista de Instalaciones</h2>
                            <button class="open-modal button button-indigo" data-modal-id="installation-modal">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                                <span>Agregar Instalación</span>
                            </button>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Dirección</th>
                                        <th>Comuna</th>
                                        <th style="text-align: right;">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Parque Araucano</td>
                                        <td>Av. Pdte. Riesco 5330</td>
                                        <td>Las Condes</td>
                                        <td class="table-actions">
                                            <button class="open-modal link-indigo" data-modal-id="installation-modal">Editar</button>
                                            <button class="link-red">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Parque O'Higgins</td>
                                        <td>Rondizzoni</td>
                                        <td>Santiago</td>
                                        <td class="table-actions">
                                            <button class="open-modal link-indigo" data-modal-id="installation-modal">Editar</button>
                                            <button class="link-red">Eliminar</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- ========= MODALES ========= -->
    
    <!-- Modal: Detalles de Usuario -->
    <div id="user-details-modal" class="modal-container is-hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalles de Usuario</h3>
                <button class="close-modal" aria-label="Cerrar modal">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="modal-body" style="display: flex; flex-direction: column; gap: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <img style="height: 4rem; width: 4rem; border-radius: 9999px;" src="https://placehold.co/100x100/E2E8F0/4A5568?text=AG" alt="Avatar">
                    <div>
                        <h4 style="font-size: 1.125rem; font-weight: 700; margin: 0;">Ana Gómez</h4>
                        <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">ana.gomez@example.com</p>
                        <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">Miembro desde: 10/10/2024</p>
                    </div>
                </div>
                <div class="modal-body-grid">
                    <div>
                        <h5 style="font-weight: 600; margin: 0 0 0.75rem 0;">Publicaciones del Usuario</h5>
                        <ul style="display: flex; flex-direction: column; gap: 0.75rem; max-height: 256px; overflow-y: auto; padding-right: 0.5rem; list-style: none; margin: 0; padding: 0;">
                            <li style="padding: 0.75rem; background: #f9fafb; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
                                <p style="font-weight: 500; font-size: 0.875rem; margin: 0;">Estado de las canchas</p>
                                <p style="font-size: 0.75rem; color: #6b7280; margin: 0;">11/11/2025 - 2 comentarios</p>
                            </li>
                            <li style="padding: 0.75rem; background: #f9fafb; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
                                <p style="font-weight: 500; font-size: 0.875rem; margin: 0;">Busco gente para jugar hoy</p>
                                <p style="font-size: 0.75rem; color: #6b7280; margin: 0;">10/11/2025 - 5 comentarios</p>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h5 style="font-weight: 600; margin: 0 0 0.75rem 0;">Comentarios del Usuario</h5>
                        <ul style="display: flex; flex-direction: column; gap: 0.75rem; max-height: 256px; overflow-y: auto; padding-right: 0.5rem; list-style: none; margin: 0; padding: 0;">
                            <li style="padding: 0.75rem; background: #f9fafb; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
                                <p style="font-size: 0.875rem; font-style: italic; margin: 0;">"¡Totalmente de acuerdo!"</p>
                                <p style="font-size: 0.75rem; color: #6b7280; margin: 0;">en "Nuevas redes..."</p>
                            </li>
                            <li style="padding: 0.75rem; background: #f9fafb; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
                                <p style="font-size: 0.875rem; font-style: italic; margin: 0;">"Yo me apunto para la próxima"</p>
                                <p style="font-size: 0.75rem; color: #6b7280; margin: 0;">en "Fútbol este sábado"</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="close-modal button button-gray">Cerrar</button>
                <button class="button button-red">Banear Usuario</button>
            </div>
        </div>
    </div>

    <!-- Modal: Detalles de Publicación -->
    <div id="post-details-modal" class="modal-container is-hidden">
        <div class="modal-content modal-content-lg" style="overflow: hidden;"> <!-- Contenido no scrollea, las columnas sí -->
            <div class="modal-header">
                <h3>Detalle de Publicación</h3>
                <button class="close-modal" aria-label="Cerrar modal">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            
            <div class="post-details-grid"> <!-- Sin modal-body, grid directo -->
                <!-- Columna Izquierda: Publicación -->
                <div class="post-details-post">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <h4>Estado de las canchas</h4>
                        <button class="comment-action-btn" aria-label="Acciones de post">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z" /></svg>
                        </button>
                    </div>
                    <div class="post-details-author">
                        <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=AG" alt="Avatar">
                        <span class="name">Ana Gómez</span>
                        <span class="date">· 11/11/2025</span>
                    </div>
                    <div class="prose">
                        <p>Hola a todos,</p>
                        <p>Quería saber si alguien ha ido al Parque Araucano esta semana. ¿Cómo están las canchas de fútbol después de la lluvia del lunes?</p>
                        <p>Agradecería cualquier información, ¡gracias!</p>
                    </div>
                </div>
                <!-- Columna Derecha: Comentarios -->
                <div class="post-details-comments">
                    <h5>Comentarios (2)</h5>
                    <div class="comment-item">
                        <div class="comment-header">
                            <div class="comment-author">
                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=CP" alt="Avatar">
                                <span>Carlos Pérez</span>
                            </div>
                            <button class="comment-action-btn" aria-label="Acciones de comentario">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z" /></svg>
                            </button>
                        </div>
                        <p>Fui ayer y estaban un poco húmedas pero jugables. Hoy deberían estar perfectas.</p>
                    </div>
                    <div class="comment-item">
                         <div class="comment-header">
                            <div class="comment-author">
                                <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=LM" alt="Avatar">
                                <span>Lucía Méndez</span>
                            </div>
                            <button class="comment-action-btn" aria-label="Acciones de comentario">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z" /></svg>
                            </button>
                        </div>
                        <p>Confirmo, acabo de pasar por ahí y se ven bien.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Agregar/Editar Instalación -->
    <div id="installation-modal" class="modal-container is-hidden">
        <div class="modal-content modal-content-md">
            <div class="modal-header">
                <h3>Agregar Nueva Instalación</h3>
                <button class="close-modal" aria-label="Cerrar modal">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <form class="modal-body" style="display: flex; flex-direction: column; gap: 1rem;">
                <div class="form-group">
                    <label for="inst-name">Nombre de la Instalación</label>
                    <input type="text" id="inst-name" class="form-input">
                </div>
                <div class="form-group">
                    <label for="inst-address">Dirección</label>
                    <input type="text" id="inst-address" class="form-input">
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="inst-region">Región</label>
                        <select id="inst-region" class="form-select">
                            <option>Metropolitana</option>
                            <option>Valparaíso</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="inst-comuna">Comuna</label>
                        <select id="inst-comuna" class="form-select">
                            <option>Las Condes</option>
                            <option>Santiago</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Ubicación (Haz clic en el mapa)</label>
                    <div id="map"></div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="inst-lat">Latitud</label>
                        <input type="text" id="inst-lat" readonly class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="inst-lng">Longitud</label>
                        <input type="text" id="inst-lng" readonly class="form-input">
                    </div>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="close-modal button button-gray">Cancelar</button>
                <button type="button" class="button button-indigo">Guardar Instalación</button>
            </div>
        </div>
    </div>


    <!-- ========= SCRIPTS ========= -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- NAVEGACIÓN PRINCIPAL (Sidebar) ---
            const navLinks = document.querySelectorAll('.nav-link');
            const contentPages = document.querySelectorAll('.content-page');
            const pageTitle = document.getElementById('page-title');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    const targetId = link.getAttribute('data-target');
                    const targetPage = document.getElementById(targetId);
                    
                    // Actualizar título
                    pageTitle.textContent = link.querySelector('span').textContent;

                    // Ocultar todas las páginas
                    contentPages.forEach(page => {
                        page.classList.add('is-hidden');
                    });
                    
                    // Mostrar la página objetivo
                    if (targetPage) {
                        targetPage.classList.remove('is-hidden');
                    }

                    // Actualizar estado activo del link
                    navLinks.forEach(navLink => {
                        navLink.classList.remove('is-active');
                    });
                    link.classList.add('is-active');
                });
            });

            // --- PESTAÑAS (Tabs) DE USUARIOS ---
            const userTabs = document.querySelectorAll('.user-tab');
            const userTabContents = document.querySelectorAll('.user-tab-content');
            
            userTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetTabId = tab.getAttribute('data-tab');
                    
                    // Ocultar todos los contenidos
                    userTabContents.forEach(content => {
                        content.classList.add('is-hidden');
                    });
                    
                    // Mostrar contenido objetivo
                    const targetContent = document.getElementById(`tab-${targetTabId}`);
                    if (targetContent) {
                        targetContent.classList.remove('is-hidden');
                    }
                    
                    // Actualizar estilos de pestañas
                    userTabs.forEach(t => {
                        t.classList.remove('is-active');
                    });
                    tab.classList.add('is-active');
                });
            });

            // --- MANEJO DE MODALES (Genérico) ---
            const openModalButtons = document.querySelectorAll('.open-modal');
            const closeModalButtons = document.querySelectorAll('.close-modal');
            const modalContainers = document.querySelectorAll('.modal-container');

            openModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modalId = button.getAttribute('data-modal-id');
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        modal.classList.remove('is-hidden');
                        
                        // Si es el modal de instalación, inicializar el mapa
                        if (modalId === 'installation-modal') {
                            initMap();
                        }
                    }
                });
            });

            closeModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Encontrar el modal padre y cerrarlo
                    const modal = button.closest('.modal-container');
                    if (modal) {
                        modal.classList.add('is-hidden');
                    }
                });
            });

            // Cerrar modal al hacer clic en el fondo oscuro
            modalContainers.forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('is-hidden');
                    }
                });
            });

            // --- LÓGICA DEL MAPA LEAFLET ---
            let mapInstance = null;
            let markerInstance = null;
            const latInput = document.getElementById('inst-lat');
            const lngInput = document.getElementById('inst-lng');

            function initMap() {
                // Centrar en Santiago de Chile por defecto
                const defaultLatLng = [-33.45694, -70.64827];

                // Solo inicializar el mapa una vez
                if (mapInstance) {
                    mapInstance.invalidateSize(); // Reajustar tamaño al reabrir modal
                    return;
                }

                mapInstance = L.map('map').setView(defaultLatLng, 13);

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(mapInstance);

                // Marcador inicial
                markerInstance = L.marker(defaultLatLng, { draggable: true }).addTo(mapInstance);

                // Actualizar inputs al arrastrar el marcador
                markerInstance.on('dragend', (e) => {
                    const latlng = e.target.getLatLng();
                    latInput.value = latlng.lat.toFixed(6);
                    lngInput.value = latlng.lng.toFixed(6);
                });

                // Mover marcador al hacer clic en el mapa
                mapInstance.on('click', (e) => {
                    const latlng = e.latlng;
                    markerInstance.setLatLng(latlng);
                    latInput.value = latlng.lat.toFixed(6);
                    lngInput.value = latlng.lng.toFixed(6);
                });

                // Establecer valores iniciales
                latInput.value = defaultLatLng[0].toFixed(6);
                lngInput.value = defaultLatLng[1].toFixed(6);
            }
        });

        // --- FUNCIONES PARA LA NUEVA VISTA DE PUBLICACIONES ---

        // Seleccionar Instalación
        function selectInstallation(event, element, installationName) {
            if (event) event.preventDefault();
            // Actualizar nombre en Col 2
            document.getElementById('selected-installation-name').textContent = installationName;
            
            // Quitar clase activa de todos los items
            document.querySelectorAll('.installation-item').forEach(item => {
                item.classList.remove('is-active');
            });
            
            // Añadir clase activa al item clickeado
            element.classList.add('is-active');
            
            // (Simulación)
            console.log(`Cargando publicaciones para: ${installationName}`);
        }

        // Seleccionar Publicación
        function selectPublication(event, element, postName) {
            if (event) event.preventDefault();
            // Actualizar nombre en Col 3
            document.getElementById('selected-post-name').textContent = `de "${postName}"`;
            
            // Quitar clase activa de todas las publicaciones
            document.querySelectorAll('.publication-item').forEach(item => {
                item.classList.remove('is-active');
            });
            
            // Añadir clase activa a la publicación clickeada
            element.classList.add('is-active');
            
            // (Simulación)
            console.log(`Cargando comentarios para: ${postName}`);
        }

    </script>

</body>
</html>